# IBL5 Migration Architecture

## Current Architecture (IBL5)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User's Browser                       â”‚
â”‚  (HTML rendered on server, minimal JavaScript)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP Requests
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Apache/PHP Web Server                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            PHP-Nuke Framework                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   55 Modules (procedural PHP)                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - Player stats                              â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - Team management                           â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - Waivers (refactored with classes)        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - Depth charts (refactored)                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - Trading, Free Agency, etc.               â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   Classes (modern PHP)                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - Waivers\*                                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - DepthChart\*                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   - Voting\*                                  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ MySQL Queries (mysqli)
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MySQL/MariaDB 10.6.20                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Mixed Storage Engines:                             â”‚ â”‚
â”‚  â”‚  - MyISAM (legacy tables)                          â”‚ â”‚
â”‚  â”‚  - InnoDB (newer tables)                           â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  Mixed Character Sets:                              â”‚ â”‚
â”‚  â”‚  - latin1 (legacy)                                 â”‚ â”‚
â”‚  â”‚  - utf8mb4 (modern)                                â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  60+ Tables:                                        â”‚ â”‚
â”‚  â”‚  - ibl_* (league data)                             â”‚ â”‚
â”‚  â”‚  - nuke_* (PHP-Nuke system)                        â”‚ â”‚
â”‚  â”‚  - Laravel migration tables                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Target Architecture (IBL6)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Modern Web Browser                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SvelteKit SPA (runs in browser)                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Svelte Components (TypeScript)               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - PlayerCard                                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - TeamCard                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - DepthChartForm                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - WaiverWireInterface                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - TradingInterface                          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Svelte Stores (State Management)             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - auth                                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - iblPlayers                                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - teamsStore                                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - leaderStore                               â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ REST API Calls (JSON)
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          SvelteKit Server (Node.js)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         SvelteKit API Routes                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  /api/players                                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  /api/teams                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  /api/games                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  /api/stats                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  /api/waivers                                â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  /api/trades                                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  /api/depth-chart                            â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Business Logic (TypeScript)                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - Validation                                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - Authorization                              â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - Business Rules                             â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Prisma ORM (Type-safe queries)
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Prisma Client Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Auto-generated TypeScript Types                    â”‚ â”‚
â”‚  â”‚  Type-safe query builder                           â”‚ â”‚
â”‚  â”‚  Connection pooling                                â”‚ â”‚
â”‚  â”‚  Migration management                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ SQL Queries
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PostgreSQL 15+                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Unified Architecture:                              â”‚ â”‚
â”‚  â”‚  - InnoDB equivalent (default)                     â”‚ â”‚
â”‚  â”‚  - UTF-8 encoding (utf8mb4 equivalent)            â”‚ â”‚
â”‚  â”‚  - Foreign key constraints                         â”‚ â”‚
â”‚  â”‚  - ACID compliance                                 â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚  60+ Tables (migrated):                             â”‚ â”‚
â”‚  â”‚  - ibl_* (league data)                             â”‚ â”‚
â”‚  â”‚  - User management tables                          â”‚ â”‚
â”‚  â”‚  - Session tables                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Transition Architecture (Running Both)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Users' Browsers        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                        â”‚
            Feature Flag or                  â”‚
            Subdomain Routing                â”‚
                    â”‚                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   IBL5 (Legacy)    â”‚   â”‚   IBL6 (New)          â”‚
        â”‚   iblhoops.net     â”‚   â”‚   beta.iblhoops.net   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                        â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                â”‚      â”‚                â”‚
            â–¼                â”‚      â–¼                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚ MySQL/MariaDBâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚ PostgreSQL   â”‚    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
            â–²                â”‚                       â”‚
            â”‚                â”‚                       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Data Sync (during migration)
```

## Data Flow Comparison

### Current (IBL5) - Server-Side Rendering

```
User clicks link
    â†“
Browser sends HTTP request
    â†“
PHP receives request
    â†“
PHP queries MySQL
    â†“
MySQL returns data
    â†“
PHP generates HTML
    â†“
Server sends complete HTML page
    â†“
Browser displays page
    â†“
(Repeat for every navigation)
```

### Target (IBL6) - Client-Side SPA

```
User visits site (first time)
    â†“
Browser loads SvelteKit app
    â†“
App hydrates (becomes interactive)
    â†“
User clicks link
    â†“
Svelte component updates (instant, no page reload)
    â†“
If data needed:
    â†“
    JavaScript fetches from /api/players
    â†“
    SvelteKit API route queries PostgreSQL via Prisma
    â†“
    PostgreSQL returns data
    â†“
    API returns JSON
    â†“
    JavaScript updates component
    â†“
    User sees new data (fast, no flicker)
```

## Component Tree Example

```
+page.svelte (Players List)
â”‚
â”œâ”€â”€ PlayerFilters.svelte
â”‚   â”œâ”€â”€ TeamSelector.svelte
â”‚   â””â”€â”€ PositionSelector.svelte
â”‚
â”œâ”€â”€ PlayerGrid.svelte
â”‚   â””â”€â”€ PlayerCard.svelte (repeated for each player)
â”‚       â”œâ”€â”€ PlayerAvatar.svelte
â”‚       â”œâ”€â”€ PlayerStats.svelte
â”‚       â””â”€â”€ PlayerActions.svelte
â”‚
â””â”€â”€ Pagination.svelte
```

## File Structure Comparison

### IBL5 Structure
```
ibl5/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ Waivers/
â”‚   â”‚   â””â”€â”€ index.php (25 lines, delegates to classes)
â”‚   â”œâ”€â”€ Depth_Chart_Entry/
â”‚   â”‚   â””â”€â”€ index.php (94 lines, delegates to classes)
â”‚   â””â”€â”€ [50+ other modules]
â”‚
â”œâ”€â”€ classes/
â”‚   â”œâ”€â”€ Waivers/
â”‚   â”‚   â”œâ”€â”€ WaiversController.php
â”‚   â”‚   â”œâ”€â”€ WaiversValidator.php
â”‚   â”‚   â”œâ”€â”€ WaiversRepository.php
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ DepthChart/
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ mainfile.php (class autoloader)
```

### IBL6 Structure
```
IBL6/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/                    # Pages & API
â”‚   â”‚   â”œâ”€â”€ +page.svelte          # Home page
â”‚   â”‚   â”œâ”€â”€ players/
â”‚   â”‚   â”‚   â”œâ”€â”€ +page.svelte      # Players list
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ +page.svelte   # Player detail
â”‚   â”‚   â””â”€â”€ api/                   # REST API
â”‚   â”‚       â”œâ”€â”€ players/
â”‚   â”‚       â”‚   â”œâ”€â”€ +server.ts     # GET /api/players
â”‚   â”‚       â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â”‚       â””â”€â”€ +server.ts  # GET /api/players/:id
â”‚   â”‚       â””â”€â”€ teams/
â”‚   â”‚           â””â”€â”€ +server.ts      # GET /api/teams
â”‚   â”‚
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ components/            # Reusable UI
â”‚       â”‚   â”œâ”€â”€ PlayerCard.svelte
â”‚       â”‚   â”œâ”€â”€ TeamCard.svelte
â”‚       â”‚   â””â”€â”€ StatsTable.svelte
â”‚       â”œâ”€â”€ stores/                # State management
â”‚       â”‚   â”œâ”€â”€ auth.ts
â”‚       â”‚   â””â”€â”€ players.ts
â”‚       â”œâ”€â”€ models/                # TypeScript types
â”‚       â”‚   â”œâ”€â”€ Player.ts
â”‚       â”‚   â””â”€â”€ Team.ts
â”‚       â”œâ”€â”€ database/
â”‚       â”‚   â””â”€â”€ prisma.ts          # Prisma client
â”‚       â””â”€â”€ utils/
â”‚           â””â”€â”€ validation.ts
â”‚
â””â”€â”€ prisma/
    â””â”€â”€ schema.prisma              # Database schema
```

## Migration Phases Visualization

```
Phase 0: Foundation (NOW - Week 1)
â”œâ”€â”€ âœ… SvelteKit scaffolded
â”œâ”€â”€ âœ… Prisma configured
â”œâ”€â”€ âœ… Basic components
â”œâ”€â”€ ğŸ”„ Complete schema mapping
â””â”€â”€ ğŸ”„ PostgreSQL setup

Phase 1: Database Setup (Week 2-3)
â”œâ”€â”€ Install PostgreSQL
â”œâ”€â”€ Complete Prisma schema (60+ models)
â”œâ”€â”€ Create migration scripts
â””â”€â”€ Seed development data

Phase 2: API Development (Week 4-7)
â”œâ”€â”€ Player endpoints
â”œâ”€â”€ Team endpoints
â”œâ”€â”€ Schedule endpoints
â””â”€â”€ Stats endpoints

Phase 3: Frontend Components (Week 8-13)
â”œâ”€â”€ Read-only pages (weeks 8-9)
â”œâ”€â”€ Interactive forms (weeks 10-11)
â””â”€â”€ Complex features (weeks 12-13)

Phase 4: Authentication (Week 14-15)
â”œâ”€â”€ JWT implementation
â”œâ”€â”€ User migration
â””â”€â”€ Permission system

Phase 5: Testing (Week 16-17)
â”œâ”€â”€ Unit tests
â”œâ”€â”€ E2E tests
â””â”€â”€ Load testing

Phase 6: Deployment (Week 18)
â”œâ”€â”€ Soft launch (beta.iblhoops.net)
â”œâ”€â”€ User testing
â””â”€â”€ Production cutover
```

## Technology Stack Comparison

| Layer | IBL5 (Current) | IBL6 (Target) |
|-------|----------------|---------------|
| **Frontend** | Server-rendered HTML | SvelteKit SPA |
| **Language** | PHP | TypeScript |
| **Styling** | Custom CSS | TailwindCSS + DaisyUI |
| **State** | Server session | Svelte stores |
| **Routing** | PHP-Nuke modules | SvelteKit file-based |
| **Backend** | PHP-Nuke framework | SvelteKit API routes |
| **Database** | MySQL/MariaDB | PostgreSQL |
| **ORM** | Raw mysqli queries | Prisma |
| **Testing** | PHPUnit | Vitest + Playwright |
| **Build** | None (interpreted) | Vite |
| **Deployment** | Apache + PHP | Node.js + Adapter |

## Performance Benefits

```
Metric               â”‚ IBL5 (Current)  â”‚ IBL6 (Target)   â”‚ Improvement
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Initial Load         â”‚ ~3-4 seconds    â”‚ ~1 second       â”‚ 3-4x faster
Subsequent Pages     â”‚ ~2-3 seconds    â”‚ ~100ms          â”‚ 20-30x faster
                     â”‚ (full reload)   â”‚ (client nav)    â”‚
API Response         â”‚ N/A             â”‚ ~100-200ms      â”‚ New capability
Bundle Size          â”‚ ~500KB HTML     â”‚ ~150KB JS       â”‚ 3x smaller
Time to Interactive  â”‚ ~4-5 seconds    â”‚ ~2 seconds      â”‚ 2x faster
Server Resources     â”‚ High (PHP)      â”‚ Medium (Node)   â”‚ More efficient
Database Queries     â”‚ N queries/page  â”‚ 1-2 per action  â”‚ Optimized
Concurrent Users     â”‚ ~100            â”‚ ~1000+          â”‚ 10x scale
```

---

*This document visualizes the architectural transformation from IBL5 to IBL6*  
*See MIGRATION_PLAN.md for implementation details*
